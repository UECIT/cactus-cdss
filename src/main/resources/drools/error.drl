package uk.nhs.cdss.rules.initial

import java.util.Arrays

import uk.nhs.cdss.rules.InitialQuestionnaire
import uk.nhs.cdss.rules.OutcomeAnswerCondition

import uk.nhs.cdss.domain.Outcome
import uk.nhs.cdss.domain.Error

import uk.nhs.cdss.exception.CdsFallOverException

import ca.uhn.fhir.rest.server.exceptions.InternalErrorException
import ca.uhn.fhir.rest.server.exceptions.InvalidRequestException
import ca.uhn.fhir.rest.server.exceptions.ResourceNotFoundException

rule "Init"
when
then
    insert( new InitialQuestionnaire("errors.errors"));

    insert( Outcome.fail("serviceFail", new CdsFallOverException("Generated by scenario"))); // What should this actually be?
    insert( new OutcomeAnswerCondition("serviceFail", "errors.errors", "q", Arrays.asList("chest")));

    insert( Outcome.fail("400error", new Error("invalid", "noRecordFound", null)));
    insert( new OutcomeAnswerCondition("400error", "errors.errors", "q", Arrays.asList("arm")));

    insert( Outcome.fail("500error", new InternalErrorException("Generated by scenario")));
    insert( new OutcomeAnswerCondition("500error", "errors.errors", "q", Arrays.asList("breathlessness")));

    insert( Outcome.fail("q!=sd", new Error("not-found", "noRecordFound", "No questionnaire found for supplied Questionnaire identifier - [id]")));
    insert( new OutcomeAnswerCondition("q!=sd", "errors.errors", "q", Arrays.asList("none")));
end